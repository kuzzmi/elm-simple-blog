{
    "apps": [
        {
            "name": "api-service",
            "script": "./api/bin/www",
            "instances": 1,
            "env": {
                "NODE_ENV": "production",
                "PORT": "3000"
            },
            "env_staging": {
                "NODE_ENV": "staging",
                "PORT": "3000"
            },
            "env_dev": {
                "NODE_ENV": "development",
                "PORT": "3000"
            }
        },

        {
            "name": "cache-service",
            "script": "./cache/bin/www",
            "instances": 1,
            "env": {
                "NODE_ENV": "production",
                "PORT": "3300"
            },
            "env_staging": {
                "NODE_ENV": "staging",
                "PORT": "3300"
            },
            "env_dev": {
                "NODE_ENV": "development",
                "PORT": "3300"
            }
        }
    ],
    "deploy": {
        "dev": {
            "user": "kuzzmi",
            "host": "dev.kuzzmi.com",
            "ref": "origin/dev",
            "repo": "git@github.com:kuzzmi/elm-simple-blog.git",
            "path": "/var/www/app/dev.kuzzmi.com/",
            "post-deploy" : "npm install -p yarn && cd api && yarn install && cd ../cache && yarn install && cd .. && pm2 startOrGracefulReload pm2-application.json --env dev",
            "env": {
                "NODE_ENV": "development"
            }
        }
    }
}
